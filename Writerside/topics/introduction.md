# 引言：容器安全



## 云原生网络安全架构

- 物理机：内外网 + 防火墙 + IPS（入侵防御系统）
- 虚拟机：虚拟网络隔离 + 虚拟防火墙 + Hypervisor
- 云原生：Kubernetes网络策略

<img src="introducation-0.png"  width="700" alt="introducation-0"/>



## 容器安全攻击方式

<img src="introducation-1.png"  width="600" alt="introducation-0"/>

- 易受攻击的程序代码：开发人员编写的应用程序代码及其所依赖的第三方依赖可能包含漏洞，攻击者可以利用它们

- 不当的容器镜像：在构建容器镜像时，有很多机会引入漏洞，这些漏洞以后可用于攻击正在运行的容器，包括将容器配置为以 root 用户身份运行等
- 构建机器攻击：如果攻击者可以修改或影响容器镜像的构建方式，他们就可以插入恶意代码，随后这些代码将在生产环境中运行
- 供应链攻击：一旦容器镜像构建完成，它就会被存储在注册表中，并在运行时从注册表中检索或拉取。在构建和部署之间能够替换或修改镜像的用户可以在已部署等镜像上运行任意代码
- 易受攻击的主机：容器在主机上运行，​​如果主机具有已知漏洞的旧版本编排组件，则存在被攻击的危险
- 暴露密码：服务代码通常需要凭据、令牌或密码才能与系统中的其他组件进行通信。在容器化部署中，需要确保能够将这些机密值传递到容器化代码中
- 不安全的网络：容器通常需要与其他容器或外部世界进行通信，攻击者可以利用不安全的网络策略，套件等方式攻击容器



<img src="introducation-2.png"  width="800" alt="introducation-0"/>