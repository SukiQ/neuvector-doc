# 策略

<img src="policy-0.png"  width="700" alt="policy-0" thumbnail="true"/>

## 准入控制

NeuVector 支持创建准入控制规则的许多标准。这些标准包括 CVE 高计数、CVE 名称、图像标签、imageScanned、命名空间、用户、runAsRoot 等，NeuVector 支持两种模式

- 监控：如果准入策略生效，事件日志中会触发警报消息。但不会影响创建资源

- 保护：一旦准入策略生效，集群资源将无法成功创建，并且会记录事件

<warning>即使规则操作是拒绝，在监控模式下也只会发出警报</warning>

用户可以创建自定义标准，用于根据镜像 yaml 中找到的常见对象



## 组

在neuVector中**通过组的方式**对容器和主机进行管理，通过对组进行合规性检查，网络规则，进程和文件控制访问规则，DLP/WAF的检测配置

<note>NeuVector 会自动从正在运行的应用程序中创建组。这些组以前缀 nv 开头</note>

neuVector的组支持三种模式：

- 学习模式：监控和记录容器的网络行为，但不阻止任何流量，仅进行观察，不干预流量，适用于初期部署和应用程序行为分析阶段

- 监控模式：允许所有合法的通信，但会检测并记录所有未授权的流量，只会发出警告，不会阻止通信，适用于测试安全策略验证期
- 保护模式：严格执行定义的安全策略，阻止所有不符合策略的流量，适用于生产期

当源组模式和目的组模式冲突时，以最小显示模式运行，确保影响最小

<code-block lang="mermaid">
graph LR
   A[学习阶段] --> B[验证阶段] --> C[实施阶段]
</code-block>



## 网络规则

NeuVector 会在学习模式下自动从正在运行的应用程序中创建网络规则，也可以在任何模式下手动添加它们

<warning>网络规则按照列表中出现的顺序执行，从上到下。要重新排序规则，请选择要移动的规则</warning>



## 应对规则

当触发安全事件或规则时，系统采取的对应措施，比如断连，隔离，从而控制爆炸波及范围



## DLP检测器

数据丢失防护（Data Loss Prevention）是一种安全技术，用于检测、监控和阻断**敏感数据**的未授权传输，NeuVector内置了预定义的正则表达式，也可以通过自定义添加检测器



## WAF检测器

WAF检测器是一种专门用于保护Web应用的安全系统，通过实时分析HTTP/HTTPS流量，识别并阻断针对Web应用的恶意请求，虽然与 DLP 类似，但检查针对的是组内每个 pod/容器的传入流量，而 DLP 仅对来自组的传入和传出流量（即安全边界）进行检查，而不是组内的内部流量（**东西向**流量）